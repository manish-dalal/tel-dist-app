{"version":3,"sources":["components/DownloadItem.js","screens/Downloads.js"],"names":["DownloadItem","torrent","useState","stopping","setStopping","className","style","opacity","lineBreak","marginRight","name","done","redableTimeRemaining","progress","height","width","backgroundColor","status","total","downloaded","speed","disabled","onClick","fetch","magnetURI","e","console","log","href","downloadLink","Downloads","useSWR","then","res","json","refreshInterval","data","error","link","setLink","adding","setAdding","addingError","setAddingError","add","a","preventDefault","indexOf","onSubmit","Input","id","label","placeholder","value","onChange","required","type","torrents","map","key"],"mappings":"qKA8DeA,MA5Df,YAAoC,IAAZC,EAAW,EAAXA,QACtB,EAAgCC,oBAAS,GAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KAYA,OACE,yBAAKC,UAAU,OAAOC,MAAO,CAAEC,QAASJ,EAAW,IAAO,IACxD,yBAAKE,UAAU,4CACb,wBAAIC,MAAO,CAAEE,UAAW,WAAYC,YAAa,QAAUR,EAAQS,MACnE,yBAAKL,UAAU,yBAAyBJ,EAAQU,KAAO,OAAf,UAA2BV,EAAQW,qBAAnC,aAA4DX,EAAQY,SAApE,QAEpB,MAArBZ,EAAQY,UACP,yBACEP,MAAO,CACLQ,OAAQ,MACRC,MAAM,GAAD,OAAKd,EAAQY,SAAb,KACLG,gBAAiB,oBAIvB,yBAAKX,UAAU,qBACb,yBAAKA,UAAU,wBACb,yBAAKA,UAAU,YAAf,YACA,6BAAMJ,EAAQgB,SAEhB,yBAAKZ,UAAU,wBACb,yBAAKA,UAAU,YAAf,UACA,6BAAMJ,EAAQiB,QAEhB,yBAAKb,UAAU,wBACb,yBAAKA,UAAU,YAAf,gBACA,6BAAMJ,EAAQkB,aAEhB,yBAAKd,UAAU,wBACb,yBAAKA,UAAU,YAAf,WACA,6BAAMJ,EAAQmB,SAEdnB,EAAQU,MACR,4BAAQU,SAAUlB,EAAUE,UAAU,aAAaiB,QA3C9C,WACXlB,GAAY,GAEZ,IACEmB,MAAM,+BAAD,OAAgCtB,EAAQuB,YAC7C,MAAOC,GACPC,QAAQC,IAAIF,MAqCR,QAIDxB,EAAQU,MACP,uBAAGiB,KAAM3B,EAAQ4B,aAAcxB,UAAU,eAAzC,WCUKyB,UA1Df,WACE,IACA,EAAwBC,YAAO,wBADf,kBAAaR,MAAK,WAAL,aAAeS,MAAK,SAAAC,GAAG,OAAIA,EAAIC,YACI,CAAEC,gBAAiB,OAA3EC,EAAR,EAAQA,KAAMC,EAAd,EAAcA,MACd,EAAwBnC,mBAAS,IAAjC,mBAAOoC,EAAP,KAAaC,EAAb,KACA,EAA4BrC,oBAAS,GAArC,mBAAOsC,EAAP,KAAeC,EAAf,KACA,EAAsCvC,mBAAS,IAA/C,mBAAOwC,EAAP,KAAoBC,EAApB,KAEMC,EAAG,uCAAG,WAAMnB,GAAN,SAAAoB,EAAA,yDACNpB,GAAGA,EAAEqB,iBACTL,GAAU,GAEsB,IAA5BH,EAAKS,QAAQ,WAJP,gBAKRJ,EAAe,6BALP,8BAORA,EAAe,IAPP,SAQWpB,MAAM,iCAAD,OAAkCe,IARlD,OAUY,MAVZ,OAUCrB,OACPsB,EAAQ,IAERI,EAAe,oBAbT,QAiBVF,GAAU,GAjBA,4CAAH,sDAoBT,OACE,oCACE,yCAEA,0BAAMO,SAAUJ,GACd,kBAACK,EAAA,EAAD,CACEC,GAAG,OACHxC,KAAK,OACLyC,MAAM,cACNC,YAAY,+DACZC,MAAOf,EACPgB,SAAUf,EACVgB,UAAQ,IAEO,KAAhBb,GAAsB,yBAAKrC,UAAU,eAAeqC,GACrD,4BAAQrB,SAAUmB,EAAQnC,UAAS,qBAAgBmC,EAAS,WAAa,IAAMgB,KAAK,UAApF,QAIDnB,GAAS,yBAAKhC,UAAU,oBAAf,0CACT+B,GACC,yBAAK/B,UAAU,sBACZ+B,EAAKqB,SAASC,KAAI,SAAAzD,GAAO,OACxB,kBAAC,EAAD,CAAcA,QAASA,EAAS0D,IAAK1D,EAAQuB","file":"static/js/4.fb799ed7.chunk.js","sourcesContent":["import React, { useState } from \"react\";\n\nfunction DownloadItem({ torrent }) {\n  const [stopping, setStopping] = useState(false);\n\n  const stop = () => {\n    setStopping(true);\n\n    try {\n      fetch(`/api/v1/torrent/remove?link=${torrent.magnetURI}`);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  return (\n    <div className=\"card\" style={{ opacity: stopping ? 0.75 : 1 }}>\n      <div className=\"card-header compact d-flex space-between\">\n        <h3 style={{ lineBreak: \"anywhere\", marginRight: \"8px\" }}>{torrent.name}</h3>\n        <div className=\"text-400 text-primary\">{torrent.done ? \"Done\" : `${torrent.redableTimeRemaining} (${torrent.progress}%)`}</div>\n      </div>\n      {torrent.progress !== 100 && (\n        <div\n          style={{\n            height: \"4px\",\n            width: `${torrent.progress}%`,\n            backgroundColor: \"var(--primary)\"\n          }}\n        />\n      )}\n      <div className=\"card-body compact\">\n        <div className=\"d-flex space-between\">\n          <div className=\"text-400\">Status: </div>\n          <div>{torrent.status}</div>\n        </div>\n        <div className=\"d-flex space-between\">\n          <div className=\"text-400\">Size: </div>\n          <div>{torrent.total}</div>\n        </div>\n        <div className=\"d-flex space-between\">\n          <div className=\"text-400\">Downloaded: </div>\n          <div>{torrent.downloaded}</div>\n        </div>\n        <div className=\"d-flex space-between\">\n          <div className=\"text-400\">Speed: </div>\n          <div>{torrent.speed}</div>\n        </div>\n        {!torrent.done && (\n          <button disabled={stopping} className=\"btn danger\" onClick={stop}>\n            Stop\n          </button>\n        )}\n        {torrent.done && (\n          <a href={torrent.downloadLink} className=\"btn success\">\n            Open\n          </a>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default DownloadItem;\n","import React, { useState } from \"react\";\nimport useSWR from \"swr\";\nimport Input from \"../components/Input\";\nimport DownloadItem from \"../components/DownloadItem\";\n\nfunction Downloads() {\n  const fetcher = (...args) => fetch(...args).then(res => res.json());\n  const { data, error } = useSWR(\"/api/v1/torrent/list\", fetcher, { refreshInterval: 3500 });\n  const [link, setLink] = useState(\"\");\n  const [adding, setAdding] = useState(false);\n  const [addingError, setAddingError] = useState(\"\");\n\n  const add = async e => {\n    if (e) e.preventDefault();\n    setAdding(true);\n\n    if (link.indexOf(\"magnet:\") !== 0) {\n      setAddingError(\"Link is not a magnet link\");\n    } else {\n      setAddingError(\"\");\n      const resp = await fetch(`/api/v1/torrent/download?link=${link}`);\n\n      if (resp.status === 200) {\n        setLink(\"\");\n      } else {\n        setAddingError(\"An error occured\");\n      }\n    }\n\n    setAdding(false);\n  };\n\n  return (\n    <>\n      <h1>Downloads</h1>\n\n      <form onSubmit={add}>\n        <Input\n          id=\"link\"\n          name=\"link\"\n          label=\"Magnet Link\"\n          placeholder=\"magnet:?xt=urn:btih:08ada5a7a6183aae1e09d831df6748d566095a10\"\n          value={link}\n          onChange={setLink}\n          required\n        />\n        {addingError !== \"\" && <div className=\"text-danger\">{addingError}</div>}\n        <button disabled={adding} className={`btn primary${adding ? \" loading\" : \"\"}`} type=\"submit\">\n          Add\n        </button>\n      </form>\n      {error && <div className=\"text-danger mt-1\">An error occured. Check your internet.</div>}\n      {data && (\n        <div className=\"d-flex-column mt-1\">\n          {data.torrents.map(torrent => (\n            <DownloadItem torrent={torrent} key={torrent.magnetURI} />\n          ))}\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default Downloads;\n"],"sourceRoot":""}