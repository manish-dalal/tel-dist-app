{"version":3,"sources":["components/DownloadItem.js","screens/Downloads.js"],"names":["DownloadItem","torrent","useState","stopping","setStopping","className","style","opacity","lineBreak","marginRight","name","done","redableTimeRemaining","progress","height","width","backgroundColor","status","total","downloaded","speed","disabled","onClick","fetch","magnetURI","e","console","log","href","downloadLink","i","Downloads","useSWR","then","res","json","refreshInterval","data","error","link","setLink","adding","setAdding","addingError","setAddingError","add","preventDefault","indexOf","onSubmit","Input","id","label","placeholder","value","onChange","required","type","torrents","map","key"],"mappings":"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","file":"static/js/4.01cea5c0.chunk.js","sourcesContent":["import React, { useState } from \"react\";\n\nfunction DownloadItem({ torrent }) {\n  const [stopping, setStopping] = useState(false);\n\n  const stop = () => {\n    setStopping(true);\n\n    try {\n      fetch(`/api/v1/torrent/remove?link=${torrent.magnetURI}`);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  return (\n    <div className=\"card\" style={{ opacity: stopping ? 0.75 : 1 }}>\n      <div className=\"card-header compact d-flex space-between\">\n        <h3 style={{ lineBreak: \"anywhere\", marginRight: \"8px\" }}>{torrent.name}</h3>\n        <div className=\"text-400 text-primary\">{torrent.done ? \"Done\" : `${torrent.redableTimeRemaining} (${torrent.progress}%)`}</div>\n      </div>\n      {torrent.progress !== 100 && (\n        <div\n          style={{\n            height: \"4px\",\n            width: `${torrent.progress}%`,\n            backgroundColor: \"var(--primary)\"\n          }}\n        />\n      )}\n      <div className=\"card-body compact\">\n        <div className=\"d-flex space-between\">\n          <div className=\"text-400\">Status: </div>\n          <div>{torrent.status}</div>\n        </div>\n        <div className=\"d-flex space-between\">\n          <div className=\"text-400\">Size: </div>\n          <div>{torrent.total}</div>\n        </div>\n        <div className=\"d-flex space-between\">\n          <div className=\"text-400\">Downloaded: </div>\n          <div>{torrent.downloaded}</div>\n        </div>\n        <div className=\"d-flex space-between\">\n          <div className=\"text-400\">Speed: </div>\n          <div>{torrent.speed}</div>\n        </div>\n        {!torrent.done && (\n          <button disabled={stopping} className=\"btn danger\" onClick={stop}>\n            Stop\n          </button>\n        )}\n        {torrent.done && (\n          <a href={torrent.downloadLink} className=\"btn success\">\n            Open\n          </a>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default DownloadItem;\n","import React, { useState } from \"react\";\nimport useSWR from \"swr\";\nimport Input from \"../components/Input\";\nimport DownloadItem from \"../components/DownloadItem\";\n\nfunction Downloads() {\n  const fetcher = (...args) => fetch(...args).then(res => res.json());\n  const { data, error } = useSWR(\"/api/v1/torrent/list\", fetcher, { refreshInterval: 3500 });\n  const [link, setLink] = useState(\"\");\n  const [adding, setAdding] = useState(false);\n  const [addingError, setAddingError] = useState(\"\");\n\n  const add = async e => {\n    if (e) e.preventDefault();\n    setAdding(true);\n\n    if (link.indexOf(\"magnet:\") !== 0) {\n      setAddingError(\"Link is not a magnet link\");\n    } else {\n      setAddingError(\"\");\n      const resp = await fetch(`/api/v1/torrent/download?link=${link}`);\n\n      if (resp.status === 200) {\n        setLink(\"\");\n      } else {\n        setAddingError(\"An error occured\");\n      }\n    }\n\n    setAdding(false);\n  };\n\n  return (\n    <>\n      <h1>Downloads</h1>\n\n      <form onSubmit={add}>\n        <Input\n          id=\"link\"\n          name=\"link\"\n          label=\"Magnet Link\"\n          placeholder=\"magnet:?xt=urn:btih:08ada5a7a6183aae1e09d831df6748d566095a10\"\n          value={link}\n          onChange={setLink}\n          required\n        />\n        {addingError !== \"\" && <div className=\"text-danger\">{addingError}</div>}\n        <button disabled={adding} className={`btn primary${adding ? \" loading\" : \"\"}`} type=\"submit\">\n          Add\n        </button>\n      </form>\n      {error && <div className=\"text-danger mt-1\">An error occured. Check your internet.</div>}\n      {data && (\n        <div className=\"d-flex-column mt-1\">\n          {data.torrents.map(torrent => (\n            <DownloadItem torrent={torrent} key={torrent.magnetURI} />\n          ))}\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default Downloads;\n"],"sourceRoot":""}